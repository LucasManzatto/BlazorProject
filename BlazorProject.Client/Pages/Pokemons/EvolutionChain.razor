@using BlazorProject.Shared.DTO
@inject HttpClient Http
<h2>Evolution Chart</h2>
<div class="row justify-content-center text-center mb-2">
    @foreach (var chain in EvolutionChainList)
    {
        <div class="col-2">
            <PokemonImage PokemonName=@chain.Name />
        </div>
        if (chain != LastFromChain)
        {
            <div class="col-1 my-auto">
                <i class="material-icons">arrow_right_alt</i>
            </div>
        }
    }
</div>

@code {
[Parameter]
public int PokemonId { get; set; }
private List<DropdownPokemon> EvolutionChainList { get; set; } = new List<DropdownPokemon>();
private DropdownPokemon LastFromChain { get; set; }

protected override async Task OnParametersSetAsync()
{
    EvolutionChainList = await Http.GetJsonAsync<List<DropdownPokemon>>($"api/Pokemons/{PokemonId}/evolutionChain");
    LastFromChain = EvolutionChainList.Last();
}
}

